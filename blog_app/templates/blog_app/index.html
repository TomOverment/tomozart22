{% extends "base.html" %}
{% load static %}
{% block title %} TOMOZART {% endblock %}

{% block content %}

<style>
  .product-carousel-wrap{
    border: 2px solid rgba(0,0,0,.35);
    border-radius: 16px;
    padding: 20px;
    background: linear-gradient(
        180deg,
        rgba(60,60,60,0.95),
        rgba(45,45,45,0.95)
    );
  }

  .product-card{
    height: 100%;
    border-radius: 20px;
    overflow: hidden;
    transition: transform .25s ease, box-shadow .25s ease;
    background-color: transparent;
  }

  .product-card-img{
    height: 220px;
    width: 100%;
    object-fit: cover;
    display: block;
  }

  .product-card .card-body{
    background-color: #f8f9fa;
    border-top: 1px solid rgba(0,0,0,.08);
  }

  .product-carousel-wrap h3{
    color: #ffffff;
  }

  /* -----------------------------
     POSTS (Refined Layout)
  ----------------------------- */

  .post-author-tag{
    display: inline-block;
    background: #2f7d7a;
    color: #fff;
    font-size: .75rem;
    letter-spacing: 1px;
    padding: 4px 10px;
    border-radius: 4px;
    margin-bottom: .75rem;
    text-transform: uppercase;
  }

  .post-title{
    font-weight: 300;
    font-size: 2rem;
    margin-bottom: 1.25rem;
    border-bottom: 1px solid rgba(0,0,0,.15);
    padding-bottom: .5rem;
  }

  .post-image-wrapper{
    overflow: hidden;
  }

  .post-image{
    width: 100%;
    height: auto;
    border-radius: 6px;
    transition: transform .3s ease;
    display: block;
  }

  .post-image:hover{
    transform: scale(1.02);
  }

  .post-description{
    font-size: 1rem;
    line-height: 1.7;
    color: #333;
    margin-top: 1rem;
  }
</style>


<!-- ========================= -->
<!-- HERO INTRO -->
<!-- ========================= -->

<div class="text-center py-5">

    <h1 class="fw-light mb-3">
        This my {% if user.is_authenticated %}{{ user.username }},{% endif %}
        is Tom O’s Art Gallery!
    </h1>

    <p class="lead text-muted mx-auto" style="max-width: 850px;">
        Buy or enjoy original artworks, like a ledge, or experience it for free, Limited edition Giclée prints, and creative pieces, 
        vibrant spray painting to mixed media canvases, Backwords engineered concept's essentialy stepping one step back in unrealised progress and walls, walls, walls!?  
    </p>

    {% if not user.is_authenticated %}
        <p class="text-muted small mt-4" style="letter-spacing: .3px;">
            Guests are welcome to explore freelyish to a piont.
            Creating an account allows you to manage purchases, 
            become a patron of cba mailing list and i'd probably give
        </p>
    {% endif %}

    <hr class="my-4">

    <p class="text-muted small mb-0">
        Scroll down to discover our <strong>Featured Products</strong>.
    </p>

</div>


<!-- ========================= -->
<!-- PRODUCT CAROUSEL -->
<!-- ========================= -->

{% if products %}
<div class="container my-4">
  <div class="product-carousel-wrap">
    <h3 class="text-center mb-3">Featured Products</h3>

    <div id="productCarousel"
         class="carousel slide"
         data-bs-ride="carousel"
         data-bs-interval="3500"
         data-bs-pause="hover">

      <div class="carousel-inner">

        {% for product in products %}
          {% if forloop.counter0|divisibleby:3 %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
              <div class="row g-3 justify-content-center">
          {% endif %}

                <div class="col-12 col-md-4">
                  <div class="card product-card h-100 shadow-sm">

                    <a href="{% url 'store:product_detail' product.id %}">
                      {% if product.image %}
                        <img src="{{ product.image.url }}"
                             class="card-img-top product-card-img"
                             alt="{{ product.name }}">
                      {% endif %}
                    </a>

                    <div class="card-body text-center">
                      <h6 class="card-title mb-1">{{ product.name }}</h6>
                      {% if product.price %}
                        <p class="card-text mb-2">£{{ product.price }}</p>
                      {% endif %}
                      <a href="{% url 'store:product_detail' product.id %}"
                         class="btn btn-sm btn-outline-dark">
                        View
                      </a>
                    </div>
                  </div>
                </div>

          {% if forloop.counter0|add:1|divisibleby:3 or forloop.last %}
              </div>
            </div>
          {% endif %}
        {% endfor %}

      </div>

      <button class="carousel-control-prev"
              type="button"
              data-bs-target="#productCarousel"
              data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
      </button>

      <button class="carousel-control-next"
              type="button"
              data-bs-target="#productCarousel"
              data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
      </button>

    </div>
  </div>
</div>
{% endif %}

<hr>


<!-- ========================= -->
<!-- BLOG POSTS -->
<!-- ========================= -->

<div class="container my-5">
  <div class="row">

    {% for post in object_list %}
      <div class="col-12 col-md-6 mb-5">

        <div class="post-author-tag">
          AUTHOR: {{ post.author|upper }}
        </div>

        <a href="{% url 'blog:post_detail' post.slug %}"
           class="text-decoration-none text-dark">
          <h2 class="post-title">{{ post.title }}</h2>
        </a>

        {% if post.post_image %}
          <div class="post-image-wrapper mb-3">
            <a href="{% url 'blog:post_detail' post.slug %}">
              <img src="{{ post.post_image.url }}"
                   alt="{{ post.title }}"
                   class="img-fluid post-image">
            </a>
          </div>
        {% endif %}

        <div class="post-description">
          {{ post.content|safe }}
        </div>

        {% if post.can_edit %}
          <div class="mt-3">
            <a href="{% url 'blog:update_post' post.pk %}"
               class="btn btn-sm btn-outline-dark me-2">
              Edit
            </a>

            <a href="{% url 'blog:delete_post' post.id %}"
               class="btn btn-sm btn-outline-dark">
              Delete
            </a>
          </div>
        {% endif %}

      </div>
    {% empty %}
      <div class="col-12">
        <div class="alert alert-secondary text-center">
          No posts yet.
        </div>
      </div>
    {% endfor %}

  </div>
</div>

{% endblock %}
