{% extends "base.html" %}
{% block title %}Gallery{% endblock %}

{% block content %}

<style>
  /* -----------------------------
     Masonry Layout
  ----------------------------- */
  .masonry {
    column-count: 1;
    column-gap: 1.75rem;
  }

  @media (min-width: 576px) {
    .masonry { column-count: 2; }
  }

  @media (min-width: 992px) {
    .masonry { column-count: 3; }
  }

  .masonry-item {
    break-inside: avoid;
    margin-bottom: 2rem;
  }

  /* -----------------------------
     Tile Styling
  ----------------------------- */
  .gallery-tile {
    overflow: hidden;
    transition: transform .25s ease, box-shadow .25s ease;
    background: transparent;
  }

  .gallery-tile:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 28px rgba(0,0,0,0.18);
  }

  .gallery-img {
    width: 100%;
    height: auto;
    display: block;
  }

  /* Remove link styling */
  .gallery-link {
    text-decoration: none;
    color: inherit;
    display: block;
  }

  .gallery-link:hover,
  .gallery-link:focus {
    text-decoration: none;
    color: inherit;
  }

  /* -----------------------------
     Caption
  ----------------------------- */
  .gallery-caption {
    padding-top: .75rem;
    text-align: center;
  }

  .gallery-caption h5 {
    font-weight: 600;
    margin-bottom: .35rem;
  }

  .gallery-caption p {
    font-size: .9rem;
    margin-bottom: 0;
  }
</style>

<div class="container py-5">

  <!-- Page Heading -->
  <div class="text-center mb-5">
    <h2 class="mb-2">Art Gallery</h2>
    <p class="text-muted mb-0">
      Explore the collection of artworks by Tomo. Click an image to view it in a full page.
    </p>
    <hr class="mt-4">
  </div>

  <!-- Masonry Grid -->
  <div class="masonry">
    {% for artwork in artworks %}
      <div class="masonry-item">

        <!-- Correct anchor tag -->
        <a href="{% url 'blog:gallery_full' artwork.id %}"
           class="gallery-link"
           aria-label="View {{ artwork.title }}">

          <div class="gallery-tile">
            <img src="{{ artwork.artwork_image.url }}"
                 class="gallery-img"
                 alt="{{ artwork.title }}">
          </div>

        </a>

        {% if artwork.title or artwork.description %}
          <div class="gallery-caption">
            {% if artwork.title %}
              <h5>{{ artwork.title }}</h5>
            {% endif %}
            {% if artwork.description %}
              <p class="text-muted">{{ artwork.description }}</p>
            {% endif %}
          </div>
        {% endif %}

      </div>
    {% empty %}
      <div class="alert alert-secondary text-center">
        No artworks available yet.
      </div>
    {% endfor %}
  </div>

</div>

{% endblock %}